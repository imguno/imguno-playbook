name: PR validation

on:
  pull_request:

jobs:
  skills-structure:
    name: Skills have SKILL.md
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Check each skill has SKILL.md
        run: |
          for d in skills/*/; do
            [ -d "$d" ] || continue
            [ -f "${d}SKILL.md" ] || { echo "Missing SKILL.md in $d"; exit 1; }
          done

  linkcheck:
    name: Markdown link check
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: lycheeverse/lychee-action@v1
        with:
          args: '**/*.md'
